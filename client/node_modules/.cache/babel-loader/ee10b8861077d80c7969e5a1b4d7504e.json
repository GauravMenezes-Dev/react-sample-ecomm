{"ast":null,"code":"import { takeEvery, call, put } from 'redux-saga/effects';\nimport ShopActionTypes from './shop.types';\nimport { firestore, convSnapToMap } from '../../firebase/firebase.utils';\nimport { fetchCollPass, fetchCollFail } from './shop.actions';\nexport function* fetchCollAsync() {\n  try {\n    const CollRef = firestore.collection('collections');\n    const snapshot = yield CollRef.get();\n    const collMap = yield call(convSnapToMap, snapshot);\n    yield put(fetchCollPass(collMap));\n  } catch (err) {\n    yield put(fetchCollFail(err));\n  } //    CollRef.get().then(snapshot => {\n  //        const collObj = convSnapToMap(snapshot)\n  //        dispatch(fetchCollPass(collObj))\n  //        this.setState({loading:false})\n  //    }).catch(err => dispatch(fetchCollFail(err.message)))\n\n}\nexport function* fetchCollStart() {\n  yield takeEvery(ShopActionTypes.FETCH_COLL_START, fetchCollAsync);\n}","map":{"version":3,"sources":["/Users/pepsico/React/e-comm/src/redux/shop/shop.saga.js"],"names":["takeEvery","call","put","ShopActionTypes","firestore","convSnapToMap","fetchCollPass","fetchCollFail","fetchCollAsync","CollRef","collection","snapshot","get","collMap","err","fetchCollStart","FETCH_COLL_START"],"mappings":"AAAA,SAASA,SAAT,EAAqBC,IAArB,EAA2BC,GAA3B,QAAqC,oBAArC;AACA,OAAOC,eAAP,MAA4B,cAA5B;AACA,SAAQC,SAAR,EAAkBC,aAAlB,QAAsC,+BAAtC;AACA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,gBAA7C;AAEA,OAAO,UAAUC,cAAV,GAA0B;AAC7B,MACA;AACI,UAAMC,OAAO,GAAGL,SAAS,CAACM,UAAV,CAAqB,aAArB,CAAhB;AACA,UAAMC,QAAQ,GAAG,MAAMF,OAAO,CAACG,GAAR,EAAvB;AACA,UAAMC,OAAO,GAAG,MAAMZ,IAAI,CACtBI,aADsB,EAEtBM,QAFsB,CAA1B;AAIA,UAAMT,GAAG,CAACI,aAAa,CAACO,OAAD,CAAd,CAAT;AACH,GATD,CAUA,OAAMC,GAAN,EAAU;AACN,UAAMZ,GAAG,CAACK,aAAa,CAACO,GAAD,CAAd,CAAT;AACH,GAb4B,CAe7B;AACA;AACA;AACA;AACA;;AAEH;AAED,OAAO,UAAUC,cAAV,GAA0B;AAC7B,QAAMf,SAAS,CACXG,eAAe,CAACa,gBADL,EAEXR,cAFW,CAAf;AAIH","sourcesContent":["import { takeEvery , call, put} from 'redux-saga/effects'\nimport ShopActionTypes from './shop.types'\nimport {firestore,convSnapToMap} from '../../firebase/firebase.utils'\nimport { fetchCollPass, fetchCollFail } from './shop.actions';\n\nexport function* fetchCollAsync(){\n    try\n    {\n        const CollRef = firestore.collection('collections')\n        const snapshot = yield CollRef.get()\n        const collMap = yield call(\n            convSnapToMap,\n            snapshot\n        )\n        yield put(fetchCollPass(collMap))\n    }\n    catch(err){\n        yield put(fetchCollFail(err))\n    }\n\n    //    CollRef.get().then(snapshot => {\n    //        const collObj = convSnapToMap(snapshot)\n    //        dispatch(fetchCollPass(collObj))\n    //        this.setState({loading:false})\n    //    }).catch(err => dispatch(fetchCollFail(err.message)))\n\n}\n\nexport function* fetchCollStart(){\n    yield takeEvery(\n        ShopActionTypes.FETCH_COLL_START,\n        fetchCollAsync\n    )\n}"]},"metadata":{},"sourceType":"module"}